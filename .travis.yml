language: python
sudo: true
dist: focal

addons:
  apt:
    packages:
    - pkg-config
    - g++
    - gfortran
    - bison
    - flex
    - libexpat1-dev
    - fftw3-dev
    - autoconf
    - automake
    - libtool
    - build-essential
    - pgplot5
    - subversion
    - libgsl-dev
    - libopenmpi-dev
    - openmpi-bin

python:
  - 2.7

matrix:
  include:
  - python: 2.7
    env: TRAVIS_IPP=TRUE
  - python: 2.7

git:
  depth: 99999

install:
  - . travis-ipp.bash
  - cp setup/setup.bash .
  - cp setup/install-difx .
  - cp setup/genipppc .
  - DIFXROOT_OVERRIDE=$PWD . setup.bash

  # debugging
  - pwd
  - ls -l setup/genipppc
  - which python
  - setup/genipppc
  - ./genipppc
  # end debugging

  - python2 install-difx $IPPARG

script:
  - /bin/true
